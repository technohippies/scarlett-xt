var content=function(){"use strict";var je=Object.defineProperty;var Be=(F,N,$)=>N in F?je(F,N,{enumerable:!0,configurable:!0,writable:!0,value:$}):F[N]=$;var O=(F,N,$)=>Be(F,typeof N!="symbol"?N+"":N,$);var le,me;function F(e){return e}function N(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $={exports:{}},Ae=$.exports,re;function ce(){return re||(re=1,function(e,s){(function(r,i){i(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ae,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const i="The message port closed before a response was received.",x=d=>{const h={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(h).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class w extends WeakMap{constructor(o,n=void 0){super(n),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const y=g=>g&&typeof g=="object"&&typeof g.then=="function",c=(g,o)=>(...n)=>{d.runtime.lastError?g.reject(new Error(d.runtime.lastError.message)):o.singleCallbackArg||n.length<=1&&o.singleCallbackArg!==!1?g.resolve(n[0]):g.resolve(n)},f=g=>g==1?"argument":"arguments",E=(g,o)=>function(t,...l){if(l.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${f(o.minArgs)} for ${g}(), got ${l.length}`);if(l.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${f(o.maxArgs)} for ${g}(), got ${l.length}`);return new Promise((A,u)=>{if(o.fallbackToNoCallback)try{t[g](...l,c({resolve:A,reject:u},o))}catch(m){console.warn(`${g} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),t[g](...l),o.fallbackToNoCallback=!1,o.noCallback=!0,A()}else o.noCallback?(t[g](...l),A()):t[g](...l,c({resolve:A,reject:u},o))})},P=(g,o,n)=>new Proxy(o,{apply(t,l,A){return n.call(l,g,...A)}});let _=Function.call.bind(Object.prototype.hasOwnProperty);const C=(g,o={},n={})=>{let t=Object.create(null),l={has(u,m){return m in g||m in t},get(u,m,b){if(m in t)return t[m];if(!(m in g))return;let a=g[m];if(typeof a=="function")if(typeof o[m]=="function")a=P(g,g[m],o[m]);else if(_(n,m)){let T=E(m,n[m]);a=P(g,g[m],T)}else a=a.bind(g);else if(typeof a=="object"&&a!==null&&(_(o,m)||_(n,m)))a=C(a,o[m],n[m]);else if(_(n,"*"))a=C(a,o[m],n["*"]);else return Object.defineProperty(t,m,{configurable:!0,enumerable:!0,get(){return g[m]},set(T){g[m]=T}}),a;return t[m]=a,a},set(u,m,b,a){return m in t?t[m]=b:g[m]=b,!0},defineProperty(u,m,b){return Reflect.defineProperty(t,m,b)},deleteProperty(u,m){return Reflect.deleteProperty(t,m)}},A=Object.create(g);return new Proxy(A,l)},M=g=>({addListener(o,n,...t){o.addListener(g.get(n),...t)},hasListener(o,n){return o.hasListener(g.get(n))},removeListener(o,n){o.removeListener(g.get(n))}}),v=new w(g=>typeof g!="function"?g:function(n){const t=C(n,{},{getContent:{minArgs:0,maxArgs:0}});g(t)}),S=new w(g=>typeof g!="function"?g:function(n,t,l){let A=!1,u,m=new Promise(p=>{u=function(k){A=!0,p(k)}}),b;try{b=g(n,t,u)}catch(p){b=Promise.reject(p)}const a=b!==!0&&y(b);if(b!==!0&&!a&&!A)return!1;const T=p=>{p.then(k=>{l(k)},k=>{let R;k&&(k instanceof Error||typeof k.message=="string")?R=k.message:R="An unexpected error occurred",l({__mozWebExtensionPolyfillReject__:!0,message:R})}).catch(k=>{console.error("Failed to send onMessage rejected reply",k)})};return T(a?b:m),!0}),L=({reject:g,resolve:o},n)=>{d.runtime.lastError?d.runtime.lastError.message===i?o():g(new Error(d.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?g(new Error(n.message)):o(n)},q=(g,o,n,...t)=>{if(t.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${f(o.minArgs)} for ${g}(), got ${t.length}`);if(t.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${f(o.maxArgs)} for ${g}(), got ${t.length}`);return new Promise((l,A)=>{const u=L.bind(null,{resolve:l,reject:A});t.push(u),n.sendMessage(...t)})},Q={devtools:{network:{onRequestFinished:M(v)}},runtime:{onMessage:M(S),onMessageExternal:M(S),sendMessage:q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},j={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return h.privacy={network:{"*":j},services:{"*":j},websites:{"*":j}},C(d,Q,h)};r.exports=x(chrome)}})}($)),$.exports}var ue=ce();const de=N(ue),xe=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),fe=new Map(xe);class Z extends Error{constructor(r){super(Z._prepareSuperMessage(r));O(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const be=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],J=new WeakSet,he=e=>{J.add(e);const s=e.toJSON();return J.delete(e),s},se=e=>fe.get(e)??Error,Y=({from:e,seen:s,to:r,forceEnumerable:i,maxDepth:x,depth:d,useToJSON:h,serialize:w})=>{if(!r)if(Array.isArray(e))r=[];else if(!w&&ne(e)){const c=se(e.name);r=new c}else r={};if(s.push(e),d>=x)return r;if(h&&typeof e.toJSON=="function"&&!J.has(e))return he(e);const y=c=>Y({from:c,seen:[...s],forceEnumerable:i,maxDepth:x,depth:d,useToJSON:h,serialize:w});for(const[c,f]of Object.entries(e)){if(f&&f instanceof Uint8Array&&f.constructor.name==="Buffer"){r[c]="[object Buffer]";continue}if(f!==null&&typeof f=="object"&&typeof f.pipe=="function"){r[c]="[object Stream]";continue}if(typeof f!="function"){if(!f||typeof f!="object"){try{r[c]=f}catch{}continue}if(!s.includes(e[c])){d++,r[c]=y(e[c]);continue}r[c]="[Circular]"}}for(const{property:c,enumerable:f}of be)typeof e[c]<"u"&&e[c]!==null&&Object.defineProperty(r,c,{value:ne(e[c])?y(e[c]):e[c],enumerable:i?!0:f,configurable:!0,writable:!0});return r};function pe(e,s={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:i=!0}=s;return typeof e=="object"&&e!==null?Y({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:i,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function we(e,s={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=s;if(e instanceof Error)return e;if(ye(e)){const i=se(e.name);return Y({from:e,seen:[],to:new i,maxDepth:r,depth:0,serialize:!1})}return new Z(e)}function ne(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function ye(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var ve=Object.defineProperty,Ee=Object.defineProperties,Se=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable,ie=(e,s,r)=>s in e?ve(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,ae=(e,s)=>{for(var r in s||(s={}))Te.call(s,r)&&ie(e,r,s[r]);if(te)for(var r of te(s))ke.call(s,r)&&ie(e,r,s[r]);return e},ge=(e,s)=>Ee(e,Se(s)),Ce=(e,s,r)=>new Promise((i,x)=>{var d=y=>{try{w(r.next(y))}catch(c){x(c)}},h=y=>{try{w(r.throw(y))}catch(c){x(c)}},w=y=>y.done?i(y.value):Promise.resolve(y.value).then(d,h);w((r=r.apply(e,s)).next())});function Pe(e){let s,r={};function i(){Object.entries(r).length===0&&(s==null||s(),s=void 0)}let x=Math.floor(Math.random()*1e4);function d(){return x++}return{sendMessage(h,w,...y){return Ce(this,null,function*(){var c,f,E,P;const _={id:d(),type:h,data:w,timestamp:Date.now()},C=(f=yield(c=e.verifyMessageData)==null?void 0:c.call(e,_))!=null?f:_;(E=e.logger)==null||E.debug(`[messaging] sendMessage {id=${C.id}} ─ᐅ`,C,...y);const M=yield e.sendMessage(C,...y),{res:v,err:S}=M??{err:new Error("No response")};if((P=e.logger)==null||P.debug(`[messaging] sendMessage {id=${C.id}} ᐊ─`,{res:v,err:S}),S!=null)throw we(S);return v})},onMessage(h,w){var y,c,f;if(s==null&&((y=e.logger)==null||y.debug(`[messaging] "${h}" initialized the message listener for this context`),s=e.addRootListener(E=>{var P,_;if(typeof E.type!="string"||typeof E.timestamp!="number"){if(e.breakError)return;const v=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(E)}`);throw(P=e.logger)==null||P.error(v),v}(_=e==null?void 0:e.logger)==null||_.debug("[messaging] Received message",E);const C=r[E.type];if(C==null)return;const M=C(E);return Promise.resolve(M).then(v=>{var S,L;return(L=(S=e.verifyMessageData)==null?void 0:S.call(e,v))!=null?L:v}).then(v=>{var S;return(S=e==null?void 0:e.logger)==null||S.debug(`[messaging] onMessage {id=${E.id}} ─ᐅ`,{res:v}),{res:v}}).catch(v=>{var S;return(S=e==null?void 0:e.logger)==null||S.debug(`[messaging] onMessage {id=${E.id}} ─ᐅ`,{err:v}),{err:pe(v)}})})),r[h]!=null){const E=Error(`[messaging] In this JS context, only one listener can be setup for ${h}`);throw(c=e.logger)==null||c.error(E),E}return r[h]=w,(f=e.logger)==null||f.log(`[messaging] Added listener for ${h}`),()=>{delete r[h],i()}},removeAllListeners(){Object.keys(r).forEach(h=>{delete r[h]}),i()}}}var D={exports:{}},Me=D.exports,oe;function _e(){return oe||(oe=1,function(e,s){(function(r,i){i(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Me,function(r){var i,x;if(!((x=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&x.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const d="The message port closed before a response was received.",h=w=>{const y={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(y).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(t,l=void 0){super(l),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}const f=n=>n&&typeof n=="object"&&typeof n.then=="function",E=(n,t)=>(...l)=>{w.runtime.lastError?n.reject(new Error(w.runtime.lastError.message)):t.singleCallbackArg||l.length<=1&&t.singleCallbackArg!==!1?n.resolve(l[0]):n.resolve(l)},P=n=>n==1?"argument":"arguments",_=(n,t)=>function(A,...u){if(u.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${P(t.minArgs)} for ${n}(), got ${u.length}`);if(u.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${P(t.maxArgs)} for ${n}(), got ${u.length}`);return new Promise((m,b)=>{if(t.fallbackToNoCallback)try{A[n](...u,E({resolve:m,reject:b},t))}catch(a){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),A[n](...u),t.fallbackToNoCallback=!1,t.noCallback=!0,m()}else t.noCallback?(A[n](...u),m()):A[n](...u,E({resolve:m,reject:b},t))})},C=(n,t,l)=>new Proxy(t,{apply(A,u,m){return l.call(u,n,...m)}});let M=Function.call.bind(Object.prototype.hasOwnProperty);const v=(n,t={},l={})=>{let A=Object.create(null),u={has(b,a){return a in n||a in A},get(b,a,T){if(a in A)return A[a];if(!(a in n))return;let p=n[a];if(typeof p=="function")if(typeof t[a]=="function")p=C(n,n[a],t[a]);else if(M(l,a)){let k=_(a,l[a]);p=C(n,n[a],k)}else p=p.bind(n);else if(typeof p=="object"&&p!==null&&(M(t,a)||M(l,a)))p=v(p,t[a],l[a]);else if(M(l,"*"))p=v(p,t[a],l["*"]);else return Object.defineProperty(A,a,{configurable:!0,enumerable:!0,get(){return n[a]},set(k){n[a]=k}}),p;return A[a]=p,p},set(b,a,T,p){return a in A?A[a]=T:n[a]=T,!0},defineProperty(b,a,T){return Reflect.defineProperty(A,a,T)},deleteProperty(b,a){return Reflect.deleteProperty(A,a)}},m=Object.create(n);return new Proxy(m,u)},S=n=>({addListener(t,l,...A){t.addListener(n.get(l),...A)},hasListener(t,l){return t.hasListener(n.get(l))},removeListener(t,l){t.removeListener(n.get(l))}}),L=new c(n=>typeof n!="function"?n:function(l){const A=v(l,{},{getContent:{minArgs:0,maxArgs:0}});n(A)}),q=new c(n=>typeof n!="function"?n:function(l,A,u){let m=!1,b,a=new Promise(R=>{b=function(I){m=!0,R(I)}}),T;try{T=n(l,A,b)}catch(R){T=Promise.reject(R)}const p=T!==!0&&f(T);if(T!==!0&&!p&&!m)return!1;const k=R=>{R.then(I=>{u(I)},I=>{let ee;I&&(I instanceof Error||typeof I.message=="string")?ee=I.message:ee="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:ee})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return k(p?T:a),!0}),Q=({reject:n,resolve:t},l)=>{w.runtime.lastError?w.runtime.lastError.message===d?t():n(new Error(w.runtime.lastError.message)):l&&l.__mozWebExtensionPolyfillReject__?n(new Error(l.message)):t(l)},j=(n,t,l,...A)=>{if(A.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${P(t.minArgs)} for ${n}(), got ${A.length}`);if(A.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${P(t.maxArgs)} for ${n}(), got ${A.length}`);return new Promise((u,m)=>{const b=Q.bind(null,{resolve:u,reject:m});A.push(b),l.sendMessage(...A)})},g={devtools:{network:{onRequestFinished:S(L)}},runtime:{onMessage:S(q),onMessageExternal:S(q),sendMessage:j.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:j.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},o={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return y.privacy={network:{"*":o},services:{"*":o},websites:{"*":o}},v(w,g,y)};r.exports=h(chrome)}else r.exports=globalThis.browser})}(D)),D.exports}var Ne=_e();const U=N(Ne);function Ie(e){return Pe(ge(ae({},e),{sendMessage(s,r){if(r==null)return U.runtime.sendMessage(s);const i=typeof r=="number"?{tabId:r}:r;return U.tabs.sendMessage(i.tabId,s,i.frameId!=null?{frameId:i.frameId}:void 0)},addRootListener(s){const r=(i,x)=>s(typeof i=="object"?ge(ae({},i),{sender:x}):i);return U.runtime.onMessage.addListener(r),()=>U.runtime.onMessage.removeListener(r)}}))}const $e=Ie().onMessage;console.log("[Scarlett Content Script] Preparing...");const Re={matches:["*://*/*"],runAt:"document_end",async main(e){console.log("[Scarlett Content Script] main() executing."),de.runtime.onMessage.addListener((s,r)=>{var i,x;if(console.debug("[Scarlett Content Script] Received message:",s,"from:",(i=r.tab)==null?void 0:i.id),s&&typeof s=="object"&&s.type==="GET_SELECTED_TEXT"){const d=((x=window.getSelection())==null?void 0:x.toString().trim())||"";return console.log(`[Scarlett Content Script] Responding with selected text: "${d.substring(0,50)}..."`),Promise.resolve(d)}}),$e("_requestSelectionFromContentScript",async s=>{var i;console.log("[Scarlett Content Script] Received _requestSelectionFromContentScript from background");const r=((i=window.getSelection())==null?void 0:i.toString())||"";return console.log(`[Scarlett Content Script] Returning selected text: "${r.substring(0,50)}..."`),{text:r}})}},W=(me=(le=globalThis.browser)==null?void 0:le.runtime)!=null&&me.id?globalThis.browser:globalThis.chrome;function V(e,...s){}const Oe={debug:(...e)=>V(console.debug,...e),log:(...e)=>V(console.log,...e),warn:(...e)=>V(console.warn,...e),error:(...e)=>V(console.error,...e)},G=class G extends Event{constructor(s,r){super(G.EVENT_NAME,{}),this.newUrl=s,this.oldUrl=r}};O(G,"EVENT_NAME",K("wxt:locationchange"));let H=G;function K(e){var s;return`${(s=W==null?void 0:W.runtime)==null?void 0:s.id}:content:${e}`}function Fe(e){let s,r;return{run(){s==null&&(r=new URL(location.href),s=e.setInterval(()=>{let i=new URL(location.href);i.href!==r.href&&(window.dispatchEvent(new H(i,r)),r=i)},1e3))}}}const B=class B{constructor(s,r){O(this,"isTopFrame",window.self===window.top);O(this,"abortController");O(this,"locationWatcher",Fe(this));O(this,"receivedMessageIds",new Set);this.contentScriptName=s,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(s){return this.abortController.abort(s)}get isInvalid(){return W.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(s){return this.signal.addEventListener("abort",s),()=>this.signal.removeEventListener("abort",s)}block(){return new Promise(()=>{})}setInterval(s,r){const i=setInterval(()=>{this.isValid&&s()},r);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(s,r){const i=setTimeout(()=>{this.isValid&&s()},r);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(s){const r=requestAnimationFrame((...i)=>{this.isValid&&s(...i)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(s,r){const i=requestIdleCallback((...x)=>{this.signal.aborted||s(...x)},r);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(s,r,i,x){var d;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(d=s.addEventListener)==null||d.call(s,r.startsWith("wxt:")?K(r):r,i,{...x,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Oe.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:B.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(s){var d,h,w;const r=((d=s.data)==null?void 0:d.type)===B.SCRIPT_STARTED_MESSAGE_TYPE,i=((h=s.data)==null?void 0:h.contentScriptName)===this.contentScriptName,x=!this.receivedMessageIds.has((w=s.data)==null?void 0:w.messageId);return r&&i&&x}listenForNewerScripts(s){let r=!0;const i=x=>{if(this.verifyScriptStartedEvent(x)){this.receivedMessageIds.add(x.data.messageId);const d=r;if(r=!1,d&&(s!=null&&s.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};O(B,"SCRIPT_STARTED_MESSAGE_TYPE",K("wxt:content-script-started"));let X=B;function Ue(){}function z(e,...s){}const Le={debug:(...e)=>z(console.debug,...e),log:(...e)=>z(console.log,...e),warn:(...e)=>z(console.warn,...e),error:(...e)=>z(console.error,...e)};return(async()=>{try{const{main:e,...s}=Re,r=new X("content",s);return await e(r)}catch(e){throw Le.error('The content script "content" crashed on startup!',e),e}})()}();
content;
