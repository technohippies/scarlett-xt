var content=function(){"use strict";var Le=Object.defineProperty;var je=(R,_,F)=>_ in R?Le(R,_,{enumerable:!0,configurable:!0,writable:!0,value:F}):R[_]=F;var O=(R,_,F)=>je(R,typeof _!="symbol"?_+"":_,F);var le,me;function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _={exports:{}},F=_.exports,re;function Ae(){return re||(re=1,function(e,n){(function(r,i){i(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:F,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const i="The message port closed before a response was received.",p=f=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class w extends WeakMap{constructor(o,s=void 0){super(s),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const y=g=>g&&typeof g=="object"&&typeof g.then=="function",c=(g,o)=>(...s)=>{f.runtime.lastError?g.reject(new Error(f.runtime.lastError.message)):o.singleCallbackArg||s.length<=1&&o.singleCallbackArg!==!1?g.resolve(s[0]):g.resolve(s)},d=g=>g==1?"argument":"arguments",E=(g,o)=>function(t,...l){if(l.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${d(o.minArgs)} for ${g}(), got ${l.length}`);if(l.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${d(o.maxArgs)} for ${g}(), got ${l.length}`);return new Promise((A,u)=>{if(o.fallbackToNoCallback)try{t[g](...l,c({resolve:A,reject:u},o))}catch(m){console.warn(`${g} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,m),t[g](...l),o.fallbackToNoCallback=!1,o.noCallback=!0,A()}else o.noCallback?(t[g](...l),A()):t[g](...l,c({resolve:A,reject:u},o))})},P=(g,o,s)=>new Proxy(o,{apply(t,l,A){return s.call(l,g,...A)}});let N=Function.call.bind(Object.prototype.hasOwnProperty);const C=(g,o={},s={})=>{let t=Object.create(null),l={has(u,m){return m in g||m in t},get(u,m,x){if(m in t)return t[m];if(!(m in g))return;let a=g[m];if(typeof a=="function")if(typeof o[m]=="function")a=P(g,g[m],o[m]);else if(N(s,m)){let T=E(m,s[m]);a=P(g,g[m],T)}else a=a.bind(g);else if(typeof a=="object"&&a!==null&&(N(o,m)||N(s,m)))a=C(a,o[m],s[m]);else if(N(s,"*"))a=C(a,o[m],s["*"]);else return Object.defineProperty(t,m,{configurable:!0,enumerable:!0,get(){return g[m]},set(T){g[m]=T}}),a;return t[m]=a,a},set(u,m,x,a){return m in t?t[m]=x:g[m]=x,!0},defineProperty(u,m,x){return Reflect.defineProperty(t,m,x)},deleteProperty(u,m){return Reflect.deleteProperty(t,m)}},A=Object.create(g);return new Proxy(A,l)},M=g=>({addListener(o,s,...t){o.addListener(g.get(s),...t)},hasListener(o,s){return o.hasListener(g.get(s))},removeListener(o,s){o.removeListener(g.get(s))}}),v=new w(g=>typeof g!="function"?g:function(s){const t=C(s,{},{getContent:{minArgs:0,maxArgs:0}});g(t)}),S=new w(g=>typeof g!="function"?g:function(s,t,l){let A=!1,u,m=new Promise(h=>{u=function(k){A=!0,h(k)}}),x;try{x=g(s,t,u)}catch(h){x=Promise.reject(h)}const a=x!==!0&&y(x);if(x!==!0&&!a&&!A)return!1;const T=h=>{h.then(k=>{l(k)},k=>{let $;k&&(k instanceof Error||typeof k.message=="string")?$=k.message:$="An unexpected error occurred",l({__mozWebExtensionPolyfillReject__:!0,message:$})}).catch(k=>{console.error("Failed to send onMessage rejected reply",k)})};return T(a?x:m),!0}),L=({reject:g,resolve:o},s)=>{f.runtime.lastError?f.runtime.lastError.message===i?o():g(new Error(f.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?g(new Error(s.message)):o(s)},q=(g,o,s,...t)=>{if(t.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${d(o.minArgs)} for ${g}(), got ${t.length}`);if(t.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${d(o.maxArgs)} for ${g}(), got ${t.length}`);return new Promise((l,A)=>{const u=L.bind(null,{resolve:l,reject:A});t.push(u),s.sendMessage(...t)})},X={devtools:{network:{onRequestFinished:M(v)}},runtime:{onMessage:M(S),onMessageExternal:M(S),sendMessage:q.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:q.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},j={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":j},services:{"*":j},websites:{"*":j}},C(f,X,b)};r.exports=p(chrome)}})}(_)),_.exports}var ce=Ae();const ue=R(ce),de=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),xe=new Map(de);class Z extends Error{constructor(r){super(Z._prepareSuperMessage(r));O(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const fe=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],J=new WeakSet,be=e=>{J.add(e);const n=e.toJSON();return J.delete(e),n},se=e=>xe.get(e)??Error,Y=({from:e,seen:n,to:r,forceEnumerable:i,maxDepth:p,depth:f,useToJSON:b,serialize:w})=>{if(!r)if(Array.isArray(e))r=[];else if(!w&&ne(e)){const c=se(e.name);r=new c}else r={};if(n.push(e),f>=p)return r;if(b&&typeof e.toJSON=="function"&&!J.has(e))return be(e);const y=c=>Y({from:c,seen:[...n],forceEnumerable:i,maxDepth:p,depth:f,useToJSON:b,serialize:w});for(const[c,d]of Object.entries(e)){if(d&&d instanceof Uint8Array&&d.constructor.name==="Buffer"){r[c]="[object Buffer]";continue}if(d!==null&&typeof d=="object"&&typeof d.pipe=="function"){r[c]="[object Stream]";continue}if(typeof d!="function"){if(!d||typeof d!="object"){try{r[c]=d}catch{}continue}if(!n.includes(e[c])){f++,r[c]=y(e[c]);continue}r[c]="[Circular]"}}for(const{property:c,enumerable:d}of fe)typeof e[c]<"u"&&e[c]!==null&&Object.defineProperty(r,c,{value:ne(e[c])?y(e[c]):e[c],enumerable:i?!0:d,configurable:!0,writable:!0});return r};function he(e,n={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:i=!0}=n;return typeof e=="object"&&e!==null?Y({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:i,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function pe(e,n={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=n;if(e instanceof Error)return e;if(we(e)){const i=se(e.name);return Y({from:e,seen:[],to:new i,maxDepth:r,depth:0,serialize:!1})}return new Z(e)}function ne(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function we(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var ye=Object.defineProperty,ve=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,ie=(e,n,r)=>n in e?ye(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,ae=(e,n)=>{for(var r in n||(n={}))Se.call(n,r)&&ie(e,r,n[r]);if(te)for(var r of te(n))Te.call(n,r)&&ie(e,r,n[r]);return e},ge=(e,n)=>ve(e,Ee(n)),ke=(e,n,r)=>new Promise((i,p)=>{var f=y=>{try{w(r.next(y))}catch(c){p(c)}},b=y=>{try{w(r.throw(y))}catch(c){p(c)}},w=y=>y.done?i(y.value):Promise.resolve(y.value).then(f,b);w((r=r.apply(e,n)).next())});function Ce(e){let n,r={};function i(){Object.entries(r).length===0&&(n==null||n(),n=void 0)}let p=Math.floor(Math.random()*1e4);function f(){return p++}return{sendMessage(b,w,...y){return ke(this,null,function*(){var c,d,E,P;const N={id:f(),type:b,data:w,timestamp:Date.now()},C=(d=yield(c=e.verifyMessageData)==null?void 0:c.call(e,N))!=null?d:N;(E=e.logger)==null||E.debug(`[messaging] sendMessage {id=${C.id}} ─ᐅ`,C,...y);const M=yield e.sendMessage(C,...y),{res:v,err:S}=M??{err:new Error("No response")};if((P=e.logger)==null||P.debug(`[messaging] sendMessage {id=${C.id}} ᐊ─`,{res:v,err:S}),S!=null)throw pe(S);return v})},onMessage(b,w){var y,c,d;if(n==null&&((y=e.logger)==null||y.debug(`[messaging] "${b}" initialized the message listener for this context`),n=e.addRootListener(E=>{var P,N;if(typeof E.type!="string"||typeof E.timestamp!="number"){if(e.breakError)return;const v=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(E)}`);throw(P=e.logger)==null||P.error(v),v}(N=e==null?void 0:e.logger)==null||N.debug("[messaging] Received message",E);const C=r[E.type];if(C==null)return;const M=C(E);return Promise.resolve(M).then(v=>{var S,L;return(L=(S=e.verifyMessageData)==null?void 0:S.call(e,v))!=null?L:v}).then(v=>{var S;return(S=e==null?void 0:e.logger)==null||S.debug(`[messaging] onMessage {id=${E.id}} ─ᐅ`,{res:v}),{res:v}}).catch(v=>{var S;return(S=e==null?void 0:e.logger)==null||S.debug(`[messaging] onMessage {id=${E.id}} ─ᐅ`,{err:v}),{err:he(v)}})})),r[b]!=null){const E=Error(`[messaging] In this JS context, only one listener can be setup for ${b}`);throw(c=e.logger)==null||c.error(E),E}return r[b]=w,(d=e.logger)==null||d.log(`[messaging] Added listener for ${b}`),()=>{delete r[b],i()}},removeAllListeners(){Object.keys(r).forEach(b=>{delete r[b]}),i()}}}var D={exports:{}},Pe=D.exports,oe;function Me(){return oe||(oe=1,function(e,n){(function(r,i){i(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Pe,function(r){var i,p;if(!((p=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&p.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const f="The message port closed before a response was received.",b=w=>{const y={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(y).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(t,l=void 0){super(l),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}const d=s=>s&&typeof s=="object"&&typeof s.then=="function",E=(s,t)=>(...l)=>{w.runtime.lastError?s.reject(new Error(w.runtime.lastError.message)):t.singleCallbackArg||l.length<=1&&t.singleCallbackArg!==!1?s.resolve(l[0]):s.resolve(l)},P=s=>s==1?"argument":"arguments",N=(s,t)=>function(A,...u){if(u.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${P(t.minArgs)} for ${s}(), got ${u.length}`);if(u.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${P(t.maxArgs)} for ${s}(), got ${u.length}`);return new Promise((m,x)=>{if(t.fallbackToNoCallback)try{A[s](...u,E({resolve:m,reject:x},t))}catch(a){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),A[s](...u),t.fallbackToNoCallback=!1,t.noCallback=!0,m()}else t.noCallback?(A[s](...u),m()):A[s](...u,E({resolve:m,reject:x},t))})},C=(s,t,l)=>new Proxy(t,{apply(A,u,m){return l.call(u,s,...m)}});let M=Function.call.bind(Object.prototype.hasOwnProperty);const v=(s,t={},l={})=>{let A=Object.create(null),u={has(x,a){return a in s||a in A},get(x,a,T){if(a in A)return A[a];if(!(a in s))return;let h=s[a];if(typeof h=="function")if(typeof t[a]=="function")h=C(s,s[a],t[a]);else if(M(l,a)){let k=N(a,l[a]);h=C(s,s[a],k)}else h=h.bind(s);else if(typeof h=="object"&&h!==null&&(M(t,a)||M(l,a)))h=v(h,t[a],l[a]);else if(M(l,"*"))h=v(h,t[a],l["*"]);else return Object.defineProperty(A,a,{configurable:!0,enumerable:!0,get(){return s[a]},set(k){s[a]=k}}),h;return A[a]=h,h},set(x,a,T,h){return a in A?A[a]=T:s[a]=T,!0},defineProperty(x,a,T){return Reflect.defineProperty(A,a,T)},deleteProperty(x,a){return Reflect.deleteProperty(A,a)}},m=Object.create(s);return new Proxy(m,u)},S=s=>({addListener(t,l,...A){t.addListener(s.get(l),...A)},hasListener(t,l){return t.hasListener(s.get(l))},removeListener(t,l){t.removeListener(s.get(l))}}),L=new c(s=>typeof s!="function"?s:function(l){const A=v(l,{},{getContent:{minArgs:0,maxArgs:0}});s(A)}),q=new c(s=>typeof s!="function"?s:function(l,A,u){let m=!1,x,a=new Promise($=>{x=function(I){m=!0,$(I)}}),T;try{T=s(l,A,x)}catch($){T=Promise.reject($)}const h=T!==!0&&d(T);if(T!==!0&&!h&&!m)return!1;const k=$=>{$.then(I=>{u(I)},I=>{let ee;I&&(I instanceof Error||typeof I.message=="string")?ee=I.message:ee="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:ee})}).catch(I=>{console.error("Failed to send onMessage rejected reply",I)})};return k(h?T:a),!0}),X=({reject:s,resolve:t},l)=>{w.runtime.lastError?w.runtime.lastError.message===f?t():s(new Error(w.runtime.lastError.message)):l&&l.__mozWebExtensionPolyfillReject__?s(new Error(l.message)):t(l)},j=(s,t,l,...A)=>{if(A.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${P(t.minArgs)} for ${s}(), got ${A.length}`);if(A.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${P(t.maxArgs)} for ${s}(), got ${A.length}`);return new Promise((u,m)=>{const x=X.bind(null,{resolve:u,reject:m});A.push(x),l.sendMessage(...A)})},g={devtools:{network:{onRequestFinished:S(L)}},runtime:{onMessage:S(q),onMessageExternal:S(q),sendMessage:j.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:j.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},o={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return y.privacy={network:{"*":o},services:{"*":o},websites:{"*":o}},v(w,g,y)};r.exports=b(chrome)}else r.exports=globalThis.browser})}(D)),D.exports}var _e=Me();const U=R(_e);function Ne(e){return Ce(ge(ae({},e),{sendMessage(n,r){if(r==null)return U.runtime.sendMessage(n);const i=typeof r=="number"?{tabId:r}:r;return U.tabs.sendMessage(i.tabId,n,i.frameId!=null?{frameId:i.frameId}:void 0)},addRootListener(n){const r=(i,p)=>n(typeof i=="object"?ge(ae({},i),{sender:p}):i);return U.runtime.onMessage.addListener(r),()=>U.runtime.onMessage.removeListener(r)}}))}const Ie=Ne().onMessage;function qe(e){return e}console.log("[Scarlett Content Script] Preparing...");const $e={matches:["*://*/*"],runAt:"document_end",async main(e){console.log("[Scarlett Content Script] main() executing."),Ie("_requestSelectionFromContentScript",async n=>{var i;console.log("[Scarlett Content Script] Received _requestSelectionFromContentScript from background");const r=((i=window.getSelection())==null?void 0:i.toString())||"";return console.log(`[Scarlett Content Script] Returning selected text: "${r.substring(0,50)}..."`),{text:r}}),ue.runtime.onMessage.addListener((n,r,i)=>(n&&n.type==="ping"&&(console.log("[Scarlett Content Script] Received ping from background."),i({pong:!0})),!0)),console.log("[Scarlett Content Script] Listeners set up.")}},W=(me=(le=globalThis.browser)==null?void 0:le.runtime)!=null&&me.id?globalThis.browser:globalThis.chrome;function V(e,...n){}const Re={debug:(...e)=>V(console.debug,...e),log:(...e)=>V(console.log,...e),warn:(...e)=>V(console.warn,...e),error:(...e)=>V(console.error,...e)},G=class G extends Event{constructor(n,r){super(G.EVENT_NAME,{}),this.newUrl=n,this.oldUrl=r}};O(G,"EVENT_NAME",K("wxt:locationchange"));let H=G;function K(e){var n;return`${(n=W==null?void 0:W.runtime)==null?void 0:n.id}:content:${e}`}function Oe(e){let n,r;return{run(){n==null&&(r=new URL(location.href),n=e.setInterval(()=>{let i=new URL(location.href);i.href!==r.href&&(window.dispatchEvent(new H(i,r)),r=i)},1e3))}}}const B=class B{constructor(n,r){O(this,"isTopFrame",window.self===window.top);O(this,"abortController");O(this,"locationWatcher",Oe(this));O(this,"receivedMessageIds",new Set);this.contentScriptName=n,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(n){return this.abortController.abort(n)}get isInvalid(){return W.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(n){return this.signal.addEventListener("abort",n),()=>this.signal.removeEventListener("abort",n)}block(){return new Promise(()=>{})}setInterval(n,r){const i=setInterval(()=>{this.isValid&&n()},r);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(n,r){const i=setTimeout(()=>{this.isValid&&n()},r);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(n){const r=requestAnimationFrame((...i)=>{this.isValid&&n(...i)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(n,r){const i=requestIdleCallback((...p)=>{this.signal.aborted||n(...p)},r);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(n,r,i,p){var f;r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(f=n.addEventListener)==null||f.call(n,r.startsWith("wxt:")?K(r):r,i,{...p,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Re.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:B.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(n){var f,b,w;const r=((f=n.data)==null?void 0:f.type)===B.SCRIPT_STARTED_MESSAGE_TYPE,i=((b=n.data)==null?void 0:b.contentScriptName)===this.contentScriptName,p=!this.receivedMessageIds.has((w=n.data)==null?void 0:w.messageId);return r&&i&&p}listenForNewerScripts(n){let r=!0;const i=p=>{if(this.verifyScriptStartedEvent(p)){this.receivedMessageIds.add(p.data.messageId);const f=r;if(r=!1,f&&(n!=null&&n.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};O(B,"SCRIPT_STARTED_MESSAGE_TYPE",K("wxt:content-script-started"));let Q=B;function Ue(){}function z(e,...n){}const Fe={debug:(...e)=>z(console.debug,...e),log:(...e)=>z(console.log,...e),warn:(...e)=>z(console.warn,...e),error:(...e)=>z(console.error,...e)};return(async()=>{try{const{main:e,...n}=$e,r=new Q("content",n);return await e(r)}catch(e){throw Fe.error('The content script "content" crashed on startup!',e),e}})()}();
content;
